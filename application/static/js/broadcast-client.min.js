!function(e){var n,t,c,a,o=function(e,n,t,c){var a=document.createElement("span");a.className="message",a.innerText=t;var o=document.createElement("span");o.className="timestamp",o.innerText=c+": ";var i=document.createElement("div");return i.id=e,i.appendChild(o),i.appendChild(a),i},i=function(e){if(!document.getElementById(e.id)){var n=o(e.id,e.sender_name,e.message,e.timestamp);t.appendChild(n)}},r=function(){n.on("connect",function(){n.emit("fetch_all_broadcasts",function(e){for(var n=0;n<e.length;n++)i(e[n])}),n.on("receive_message",function(e){i(e)})})},s=function(){a.onclick=function(){e.broadcast()}},u=function(e){n.emit("send_message",e,function(e){console.log(e)})};e.broadcast=function(){var e=c.value;u(e)},e.broadcastWithMessage=function(e){u(e)},e.init=function(e,o,i,u){n=io.connect(e),t=document.querySelector(o),c=document.querySelector(i),a=document.querySelector(u),a&&s(),r()}}(this.BroadcastClient={});