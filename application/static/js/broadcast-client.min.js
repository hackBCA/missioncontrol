!function(e){var n,t,a,o,c,i,r=function(e,n,t,a){var o=document.createElement("span");o.className="sender",o.innerText=n+": ";var c=document.createElement("span");c.className="message",c.innerText=t;var i=a.split(" "),r=document.createElement("span");r.className="datestamp",r.innerText=i[0];var s=document.createElement("span");s.className="timestamp",s.innerText=i[1]+" "+i[2];var l=document.createElement("div");return l.id=e,l.appendChild(o),l.appendChild(c),l.appendChild(r),l.appendChild(s),l},s=function(e){if(!document.getElementById(e.id)){var n=r(e.id,e.sender_name,e.message,e.timestamp);t.insertBefore(n,t.firstChild),t.scrollTop=0}},l=function(){n.on("connect",function(){n.emit("fetch_all_broadcasts",function(e){for(var n=0;n<e.length;n++)s(e[n])}),n.on("receive_message",function(e){c.play(),s(e)})})},m=function(){o.onclick=function(){e.broadcast()}},d=function(e){var e=e.trim();e.length<1?console.log("Error: Message is empty."):n.emit("send_message",e,i,function(e){console.log(e)})};e.broadcast=function(){var e=a.value.trim();e.length<1?console.log("Error: Message is empty."):d(e),a.value=""},e.broadcastWithMessage=function(e){d(e)},e.init=function(e,r,s,d,u,p){n=io.connect(e),t=document.querySelector(r),a=document.querySelector(u),o=document.querySelector(p),c=new Audio(s),i=d,o&&m(),l()}}(this.BroadcastClient={});